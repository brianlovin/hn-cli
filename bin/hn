#!/bin/sh
# Launcher that works with both Node.js and Bun

# Resolve symlinks to find the real script location
SCRIPT="$0"
while [ -L "$SCRIPT" ]; do
  SCRIPT_DIR="$(cd "$(dirname "$SCRIPT")" && pwd)"
  SCRIPT="$(readlink "$SCRIPT")"
  # Handle relative symlinks
  case "$SCRIPT" in
    /*) ;;
    *) SCRIPT="$SCRIPT_DIR/$SCRIPT" ;;
  esac
done
SCRIPT_DIR="$(cd "$(dirname "$SCRIPT")" && pwd)"

if command -v bun >/dev/null 2>&1; then
  exec bun "$SCRIPT_DIR/hn.mjs" "$@"
elif command -v node >/dev/null 2>&1; then
  exec node "$SCRIPT_DIR/hn.mjs" "$@"
else
  echo "Error: Neither bun nor node found in PATH."
  echo "Please install Bun (https://bun.sh) or Node.js (https://nodejs.org)"
  exit 1
fi
